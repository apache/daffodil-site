<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>Layer (Apache Daffodil 4.1.0 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: org.apache.daffodil.api.layers, class: Layer">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.apache.daffodil.api.layers</a></div>
<h1 title="Class Layer" class="title">Class Layer</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">org.apache.daffodil.api.layers.Layer</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code>org.apache.daffodil.lib.util.SimpleNamedLoadableService</code></dd>
</dl>
<dl class="notes">
<dt>Direct Known Subclasses:</dt>
<dd><code>org.apache.daffodil.runtime1.layers.ChecksumLayerBase</code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public abstract class </span><span class="element-name type-name-label">Layer</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>
implements org.apache.daffodil.lib.util.SimpleNamedLoadableService</span></div>
<div class="block">This is the primary API class for writing layers.
 <p>
 All layers are derived from this class.
 <p>
 This class is used directly as a base class to define <i>transforming</i> layers.
 To simplify the
 definition of <i>checksum</i> layers, a specialized sub-class
 <a href="ChecksumLayer.html" title="class in org.apache.daffodil.api.layers"><code>ChecksumLayer</code></a>
 is also available.
 Many of the requirements for layers, such as the naming conventions for layer variables,
 are described here, but they apply equally to checksum layers.
 <p>
 Derived classes will be dynamically loaded by Java's Service Provider Interface (SPI) system.
 The names of concrete classes derived from Layer are listed in
 a metadata resource file
 named for this class (that is, the file name is the fully-qualified class name of this class:
 <code>resources/META-INF/services/org.apache.daffodil.api.layers.Layer</code>).
 This file contains lines where each line contains one fully qualified class name of a derived
 layer class.
 More than one line in the file denotes that the Jar file contains the definitions of more than one derived layer
 class.
 This file is incorporated in the compiled jar file for the derived <code>Layer</code> class
 so that the class path can be searched and Jars containing layer classes can be dynamically loaded.
 <p>
 The SPI creates an instance the class by calling a default (no-arg) constructor, which should be
 the only constructor.
 <p>
 Instances of derived layer classes can be stateful.
 They are private to threads, and each time a layer
 is encountered during parse/unparse, an instance is created for that situation.
 <p>
 Layer instances should not share mutable state (such as via singleton objects).
 <p>
 <h2>About Layer Variables</h2>
 <p>
 Layer logic may read and write DFDL variables.
 These variables are associated with the layer implementation class by using
 Java/Scala reflection to find matches (case-sensitive) between the names of DFDL variables and method
 names and method arguments of the layer's Java/Scala code.
 Hence, the layer's DFDL variables must have names suitable for use as Java/Scala
 identifiers.
 <p>
 The layer namespace is used only for its layer.
 All DFDL variables defined in that namespace are either used to pass parameters to the
 layer code, or receive results (such as a checksum) back from the layer code.
 This is enforced.
 If a layer namespace contains a DFDL variable and there is no corresponding
 usage of that variable name in the layer code (following the conventions below), then
 it is a Schema Definition Error when the layer code is loaded.
 <p>
 A layer that does not define any DFDL variables does
 not have to define a DFDL schema that defines the layer's target
 namespace, but any layer that uses DFDL variables *must* define a
 schema with the layer's namespace as its target namespace, and with the
 variables declared in it (using <code>dfdl:defineVariable</code>).
 </p>
 Every DFDL Variable in the layer's target namespace is used either at the start of the
 layer algorithm as a parameter to the layer or at the end of the layer algorithm where it is
 assigned a return value (such as a checksum or flag) from the layer.
 <p>
 Variables being read must have values before being read by the layer, and this is true for both
 parsing and unparsing.
 This happens when the Daffodil processor begins parsing/unparsing the layered sequence.
 When unparsing, variables being read cannot be forward-referencing to parts
 of the DFDL infoset that have not yet been unparsed.
 <p>
 A layer that wants to read parameters declares a special setter named
 <code>setLayerVariableParameters</code>
 which has arguments where each has a name and type that match a corresponding
 <code>dfdl:defineVariable</code> in the layer's target namespace.
 <p>
 For example, if the layer logic has a DFDL variable for a parameter named <code>direction</code>
 of type <code>xs:string</code> and another DFDL variable for a parameter named <code>wordCount</code>
 of type <code>xs:unsignedShort</code>
 then the derived Layer class must have a <code>setLayerVariableParameters</code> with
 arguments corresponding in name and type to these two variables.
 This setter will be called passing the value of the variables immediately after the layer
 instance is constructed.
 The arguments to <code>setLayerVariableParameters</code> can be in any order:
 <pre>
     void setLayerVariableParameters(String direction, int wordCount) {
         // usually this setter will assign the values to data members
         this.direction = direction;
         this.wordCount = wordCount;
     }
 </pre>
 Beside initializing local members, this setter is also an initializer for the layer class instance.
 Any exception thrown becomes a Schema Definition Error.
 <p>
 If there are no parameter variables, then this setter, with no arguments, can be used purely for initialization.
 <p>
 A DFDL variable used to return a result from a layer must be undefined, since variables in DFDL are single-assignment.
 Usually this means the use of the layer must be surrounded by a <code>dfdl:newVariableInstance</code>
 annotation which creates a new instance of the layer result variable, over a limited scope
 of use.
 The variable is assigned by the layer, and it is then available for reading by the DFDL schema until
 the end of the <code>dfdl:newVariableInstance</code> scope.
 <p>
 To return a value into a DFDL variable, the layer implementation defines a special recognizable
 getter method.
 The name of the getter is formed from prefixing the DFDL variable name with the string
 "<code>getLayerVariableResult_</code>".
 The return type of the getter must correspond to the type of the variable.
 <p>
 For example, a result value getter for a DFDL variable named <code>total</code> of type <code>xs:unsignedShort</code> would be:
 <pre>
 <code>
      int getLayerVariableResult_total() {
          // returns the value created by the layer's algorithm.
          // commonly this returns the value of a data member.
          return this.total;
      }
 </code>
 </pre>
 Layers could have multiple result variables, but a single variable is most common, generally for returning checksums.
 See the <a href="ChecksumLayer.html" title="class in org.apache.daffodil.api.layers"><code>ChecksumLayer</code></a> class, which is designed to facilitate creation of checksum/CRC/hash/digest layers.
 <p>
 The Java types to use for the setter arguments and getter return types correspond to the DFDL variable types
 according to this table:
 <table border="1">
     <tr>
         <th>DFDL Schema Type</th>
         <th>Java Type</th>
     </tr>
     <tr>
         <td>xs:byte</td>
         <td>byte</td>
     </tr>
     <tr>
         <td>xs:short</td>
         <td>short</td>
     </tr>
     <tr>
         <td>xs:int</td>
         <td>int</td>
     </tr>
     <tr>
         <td>xs:long</td>
         <td>long</td>
     </tr>
     <tr>
         <td>xs:integer</td>
         <td>java.math.BigInteger</td>
     </tr>
     <tr>
         <td>xs:decimal</td>
         <td>java.math.BigDecimal</td>
     </tr>
     <tr>
         <td>xs:unsignedInt</td>
         <td>long</td>
     </tr>
     <tr>
         <td>xs:unsignedByte</td>
         <td>short</td>
     </tr>
     <tr>
         <td>xs:unsignedShort</td>
         <td>int</td>
     </tr>
     <tr>
         <td>xs:unsignedLong</td>
         <td>java.math.BigInteger</td>
     </tr>
     <tr>
         <td>xs:nonNegativeInteger</td>
         <td>java.math.BigInteger</td>
     </tr>
     <tr>
         <td>xs:double</td>
         <td>double</td>
     </tr>
     <tr>
         <td>xs:float</td>
         <td>float</td>
     </tr>
     <tr>
         <td>xs:hexBinary</td>
         <td>byte[]</td>
     </tr>
     <tr>
         <td>xs:anyURI</td>
         <td>java.net.URI</td>
     </tr>
     <tr>
         <td>xs:boolean</td>
         <td>boolean</td>
     </tr>
     <tr>
         <td>xs:dateTime</td>
         <td>com.ibm.icu.util.ICUCalendar</td>
     </tr>
     <tr>
         <td>xs:date</td>
         <td>com.ibm.icu.util.ICUCalendar</td>
     </tr>
     <tr>
         <td>xs:time</td>
         <td>com.ibm.icu.util.ICUCalendar</td>
     </tr>
     <caption style="caption-side:bottom"></caption>
 </table>
 <p>
 <h2>Layer Algorithm</h2>
 <p>
 The rest of the Layer class implements the layer decode/encode logic.
 <p>
 The actual algorithm of the layer is not implemented in methods of the derived layer class, but rather is
 implemented in the layer's <i>input decoder</i> and <i>output encoder</i>.
 These extend the <code>java.io.InputStream</code> and <code>java.io.OutputStream</code> base classes to actually handle the
 data.
 <p>
 Every layer must implement the <code>wrapLayerInput</code> and <code>wrapLayerOutput</code>
 methods, which provide the input decoder and output encoder instances to the Daffodil layer framework.
 When parsing/unparsing, the derived Layer class itself is concerned with setup and tear-down of the
 layer's input decoder and output encoder, with providing access to/from DFDL variables,
 and with reporting errors effectively.
 <p>
 <h3> Layer Exception Handling </h3>
 The method <code>setProcessingErrorException </code> allows the layer to specify that if the layer throws specific
 exceptions or runtime exceptions that they are converted into processing errors.
 This eliminates most need for layer code to contain try-catches.
 For example:
 <pre>
 <code>
     setProcessingErrorException(IOException.class);
 </code>
 </pre>
 informs the DFDL processor that an IOException thrown from the layer is to be treated as a processing error.
 <p>
 Unhandled exceptions thrown by the layer code are treated as fatal errors.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(java.lang.String,java.lang.String)" class="member-name-link">Layer</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;localName,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;targetNamespace)</code></div>
<div class="col-last even-row-color">
<div class="block">Constructs a new Layer object with the given layer name and namespace URI.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>final org.apache.daffodil.runtime1.layers.LayerRuntime</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getLayerRuntime()" class="member-name-link">getLayerRuntime</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">For framework use.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;? extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a>&gt;&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getProcessingErrorExceptions()" class="member-name-link">getProcessingErrorExceptions</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">For framework use.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#localName()" class="member-name-link">localName</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">For framework use.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#name()" class="member-name-link">name</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">For framework use.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#namespace()" class="member-name-link">namespace</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">For framework use.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#processingError(java.lang.String)" class="member-name-link">processingError</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;msg)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Use to report a processing error.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#processingError(java.lang.Throwable)" class="member-name-link">processingError</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a>&nbsp;cause)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Use to report a processing error.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#runtimeSchemaDefinitionError(java.lang.String)" class="member-name-link">runtimeSchemaDefinitionError</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;msg)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Use to report a runtime schema definition error.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#runtimeSchemaDefinitionError(java.lang.Throwable)" class="member-name-link">runtimeSchemaDefinitionError</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a>&nbsp;cause)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Use to report a runtime schema definition error.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>final void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setLayerRuntime(org.apache.daffodil.runtime1.layers.LayerRuntime)" class="member-name-link">setLayerRuntime</a><wbr>(org.apache.daffodil.runtime1.layers.LayerRuntime&nbsp;lr)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">For framework use.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>final void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setProcessingErrorException(java.lang.Class)" class="member-name-link">setProcessingErrorException</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;? extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a>&gt;&nbsp;e)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Use to add an exception class to the list of exceptions that will be automatically converted
 into processing errors.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>abstract <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/InputStream.html" title="class or interface in java.io" class="external-link">InputStream</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#wrapLayerInput(java.io.InputStream)" class="member-name-link">wrapLayerInput</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/InputStream.html" title="class or interface in java.io" class="external-link">InputStream</a>&nbsp;jis)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Wraps a layer <i>input decoder</i> around an input stream.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>abstract <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/OutputStream.html" title="class or interface in java.io" class="external-link">OutputStream</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#wrapLayerOutput(java.io.OutputStream)" class="member-name-link">wrapLayerOutput</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/OutputStream.html" title="class or interface in java.io" class="external-link">OutputStream</a>&nbsp;jos)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Wraps a layer <i>output encoder</i> around an output stream.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(java.lang.String,java.lang.String)">
<h3>Layer</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">Layer</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;localName,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;targetNamespace)</span></div>
<div class="block">Constructs a new Layer object with the given layer name and namespace URI.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>localName</code> - the local NCName of the layer. Must be usable as a Java identifier.</dd>
<dd><code>targetNamespace</code> - the namespace URI of the layer. Must obey URI syntax.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if arguments are null or do not obey required syntax.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="name()">
<h3>name</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">name</span>()</div>
<div class="block">For framework use.
 <p>
 This method and the string it returns are required by the SPI loader.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code>name</code>&nbsp;in interface&nbsp;<code>org.apache.daffodil.lib.util.SimpleNamedLoadableService</code></dd>
<dt>Returns:</dt>
<dd>A unique indentifier for the kind of layer. Contains both local and namespace components of the layer's complete name.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="localName()">
<h3>localName</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">localName</span>()</div>
<div class="block">For framework use.</div>
</section>
</li>
<li>
<section class="detail" id="namespace()">
<h3>namespace</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">namespace</span>()</div>
<div class="block">For framework use.</div>
</section>
</li>
<li>
<section class="detail" id="setLayerRuntime(org.apache.daffodil.runtime1.layers.LayerRuntime)">
<h3>setLayerRuntime</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setLayerRuntime</span><wbr><span class="parameters">(org.apache.daffodil.runtime1.layers.LayerRuntime&nbsp;lr)</span></div>
<div class="block">For framework use.
 <p>
 Called by the execution framework to give the context for reporting errors.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>lr</code> - runtime data structure used by the framework</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getLayerRuntime()">
<h3>getLayerRuntime</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">org.apache.daffodil.runtime1.layers.LayerRuntime</span>&nbsp;<span class="element-name">getLayerRuntime</span>()</div>
<div class="block">For framework use.
 <p>
 Called by the execution framework to obtain the context for reporting errors.</div>
</section>
</li>
<li>
<section class="detail" id="processingError(java.lang.String)">
<h3>processingError</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">processingError</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;msg)</span></div>
<div class="block">Use to report a processing error.
 <p>
 When parsing a processing error can cause backtracking so that the parse
 can often recover from the error.
 <p>
 When unparsing a processing error is fatal.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>msg</code> - describes the error</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="processingError(java.lang.Throwable)">
<h3>processingError</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">processingError</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a>&nbsp;cause)</span></div>
<div class="block">Use to report a processing error.
 <p>
 When parsing a processing error can cause backtracking so that the parse
 can often recover from the error.
 <p>
 When unparsing a processing error is fatal.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>cause</code> - a throwable object that describes the error</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="runtimeSchemaDefinitionError(java.lang.String)">
<h3>runtimeSchemaDefinitionError</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">runtimeSchemaDefinitionError</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;msg)</span></div>
<div class="block">Use to report a runtime schema definition error.
 <p>
 This indicates that the layer is unable to
 work meaningfully because of the way it is configured.
 That is, the schema itself is not well defined due to
 the way the layer is configured.
 <p>
 For example suppose a layer had a DFDL variable for a parameter that is supposed
 to be an integer between 1 and 10, and this parameter is generally provided as a constant value.
 If the provided parameter variable value is 0, which is not meaningful, then a
 Runtime Schema Definition Error is the right error to invoke.
 <p>
 This error type is always fatal whether parsing or unparsing.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>msg</code> - describes the error</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="runtimeSchemaDefinitionError(java.lang.Throwable)">
<h3>runtimeSchemaDefinitionError</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">runtimeSchemaDefinitionError</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a>&nbsp;cause)</span></div>
<div class="block">Use to report a runtime schema definition error.
 <p>
 This indicates that the layer is unable to
 work meaningfully because of the way it is configured. The schema itself is not well defined due to
 the way the layer is configured.
 <p>
 This error type is always fatal whether parsing or unparsing.
 See <code>runtimeSchemaDefinitionError(String) </code> for discussion of situations where
 a Runtime Schema Definition Error is appropriate.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>cause</code> - a throwable object that describes the error</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="wrapLayerInput(java.io.InputStream)">
<h3>wrapLayerInput</h3>
<div class="member-signature"><span class="modifiers">public abstract</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/InputStream.html" title="class or interface in java.io" class="external-link">InputStream</a></span>&nbsp;<span class="element-name">wrapLayerInput</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/InputStream.html" title="class or interface in java.io" class="external-link">InputStream</a>&nbsp;jis)</span>
                                    throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></span></div>
<div class="block">Wraps a layer <i>input decoder</i> around an input stream.
 <p>
 This input decoder does the real parser-time work of the layer.
 It implements <code>java.io.InputStream</code>, by
 reading data from the given argument input stream, and decoding it.
 <p>
 Any exception thrown from this wrap method becomes a Schema Definition Error (fatal).
 <p>
 The input decoder generally uses a reference to this layer instance to report errors.
 <p>
 To have the Daffodil layer framework convert uncaught exceptions
 thrown by the input decoder into processing errors automatically,
 call the <code>setProcessingErrorException(Class)</code>.
 Other kinds of input decoder processing errors can be signaled by calling the <code>processingError(String)</code> or
 <code>processingError(Throwable)</code> methods.
 Input decoder schema definition errors are more rare, but if needed the <code>runtimeSchemaDefinitionError(String)</code> or
 <code>runtimeSchemaDefinitionError(Throwable)</code> methods may be called.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>jis</code> - The input stream to be wrapped.</dd>
<dt>Returns:</dt>
<dd>An input stream with the layer's input decoder wrapped around it.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="wrapLayerOutput(java.io.OutputStream)">
<h3>wrapLayerOutput</h3>
<div class="member-signature"><span class="modifiers">public abstract</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/OutputStream.html" title="class or interface in java.io" class="external-link">OutputStream</a></span>&nbsp;<span class="element-name">wrapLayerOutput</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/OutputStream.html" title="class or interface in java.io" class="external-link">OutputStream</a>&nbsp;jos)</span>
                                      throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></span></div>
<div class="block">Wraps a layer <i>output encoder</i> around an output stream.
 <p>
 The output encoder does the real unparse-time work of the layer.
 It implements <code>java.io.OutputStream</code> by
 accepting data via the usual output stream write calls, encoding this
 data, and writing the encoded data to the argument output stream.
 <p>
 Any exception thrown from this wrap method becomes a Schema Definition Error (fatal).
 <p>
 The output encoder generally uses a reference to this layer to report errors.
 <p>
 To have the Daffodil layer framework convert uncaught exceptions
 thrown by the output encoder into processing errors automatically,
 call the <code>setProcessingErrorException(Class)</code>.
 Other kinds of output encoder processing errors can be signaled by calling the <code>processingError(String)</code> or
 <code>processingError(Throwable)</code> methods.
 Output encoder schema definition errors are more rare, but if needed the <code>runtimeSchemaDefinitionError(String)</code> or
 <code>runtimeSchemaDefinitionError(Throwable)</code> methods may be called.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>jos</code> - The output stream to be wrapped.</dd>
<dt>Returns:</dt>
<dd>An output stream with the layer wrapped around it.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setProcessingErrorException(java.lang.Class)">
<h3>setProcessingErrorException</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setProcessingErrorException</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;? extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a>&gt;&nbsp;e)</span></div>
<div class="block">Use to add an exception class to the list of exceptions that will be automatically converted
 into processing errors.
 <p>
 The purpose of this is to allow one to use java/scala libraries that may throw
 exceptions when encountering bad data. Such exceptions should be translated into
 processing errors, which will allow the parser to backtrack and try other alternatives
 which may work for that data.
 By calling this method the layer framework implements the try-catch logic to capture
 these exception types and convert them into processing errors.
 This avoids a great deal of try-catch logic that would otherwise be required in
 layer methods.
 <p>
 When considering whether a thrown Exception is to be converted to a processing error
 RuntimeException classes are handled separately from Exception classes.
 Hence calling
 <pre>
     setProcessingErrorException(Exception.class);
 </pre>
 will NOT cause all RuntimeExceptions to also be converted into processing errors.
 It will, however, cause all classes derived from Exception that are NOT RuntimeExceptions
 to be caught and converted into Processing Errors.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>e</code> - the exception class to be added to the list of processing error exceptions</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getProcessingErrorExceptions()">
<h3>getProcessingErrorExceptions</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;? extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a>&gt;&gt;</span>&nbsp;<span class="element-name">getProcessingErrorExceptions</span>()</div>
<div class="block">For framework use.</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
