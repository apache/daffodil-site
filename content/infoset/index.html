<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Apache Daffodil (incubating) | Daffodil and the DFDL Infoset</title>
    <meta name="description" content="Daffodil and the DFDL Infoset">
    <meta name="author" content="">

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link href="/assets/themes/apache/bootstrap/css/bootstrap.css" rel="stylesheet">
    <link href="/assets/themes/apache/css/style.css?body=1" rel="stylesheet" type="text/css">
    <link href="/assets/themes/apache/css/syntax.css" rel="stylesheet"  type="text/css" media="screen" />

  </head>

  <body>

        <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">
              <!--<img src="/assets/themes/apache/img/logo.png" width="50">-->
              Apache Daffodil (incubating)
          </a>
        </div>
        <nav class="navbar-collapse collapse" role="navigation">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="/releases">Releases</a></li>
            <li id="documentation">
              <a href="#" data-toggle="dropdown" class="dropdown-toggle">Docs<b class="caret"></b></a>
              <ul class="dropdown-menu dropdown-left">
                <li><a href="/getting-started/">Getting Started</a></li>
                <li><a href="/examples/">Examples</a></li>
                <li><a href="/docs/latest/javadoc/">Java API</a></li>
                <li><a href="/docs/latest/scaladoc/">Scala API</a></li>
                <li><a href="/docs/dfdl/">DFDL Specification</a></li>
                <li><a href="/unsupported/">Unsupported Features</a></li>
                <li><a href="/faq/">Frequently Asked Questions</a></li>
              </ul>
            </li>
            <li id="community">
              <a href="#" data-toggle="dropdown" class="dropdown-toggle">Community<b class="caret"></b></a>
              <ul class="dropdown-menu dropdown-left">
                <li><a href="/community">Get Involved</a></li>
                <li><a href="/people">People</a></li>
              </ul>
            </li>
            <li id="development">
              <a href="#" data-toggle="dropdown" class="dropdown-toggle">Development<b class="caret"></b></a>
              <ul class="dropdown-menu dropdown-left">
                <li><a class="external" href="https://cwiki.apache.org/confluence/display/DAFFODIL/">Wiki</a></li>
                <li><a class="external" href="https://github.com/search?q=repo%3Aapache%2Fincubator-daffodil+repo%3Aapache%2Fincubator-daffodil-site&type=Repositories">GitHub</a></li>
                <li><a class="external" href="https://issues.apache.org/jira/projects/DAFFODIL/">JIRA</a></li>
              </ul>
            </li>
            <li id="apache">
              <a href="#" data-toggle="dropdown" class="dropdown-toggle">Apache<b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a class="external" href="http://www.apache.org/">Apache Software Foundation</a></li>
                <li><a class="external" href="http://www.apache.org/licenses/">License</a></li>
                <li><a class="external" href="http://www.apache.org/security">Security</a></li>
                <li><a class="external" href="http://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
                <li><a class="external" href="http://www.apache.org/foundation/thanks.html">Thanks</a></li>
              </ul>
            </li>
          </ul>
        </nav>
      </div>
    </div>




    <div class="container">
      <div class="row">
  <div class="col-md-12">
    <!--

-->

<h2 id="daffodil-and-the-dfdl-infoset">Daffodil and the DFDL Infoset</h2>

<p>Daffodil is an implementation of DFDL which supports multiple methods to
represent the DFDL Infoset, including various XML representations and JSON.
However, the DFDL Infoset is somewhat different from the representations that
Daffodil creates since Daffodil approximates the DFDL Infoset using a subset of
features of XML/JSON. The below tables describe how Daffodil maps the DFDL
Infoset to the supported representations.</p>

<ul class="nav nav-tabs">
  <li class="active"><a data-toggle="tab" href="#jdom">JDOM</a></li>
  <li><a data-toggle="tab" href="#w3cdom">W3C DOM</a></li>
  <li><a data-toggle="tab" href="#scalanode">Scala Node</a></li>
  <li><a data-toggle="tab" href="#xmltext">XML Text</a></li>
  <li><a data-toggle="tab" href="#json">JSON</a></li>
</ul>

<div class="tab-content">
  <div id="jdom" class="tab-pane fade in active">
    <table class="table">
      <tr>
        <td class="col-md-3">Document Information Item</td>
        <td class="col-md-9">org.jdom.Document</td>
      </tr>
      <tr>
        <td class="col-md-3">root</td>
        <td class="col-md-9">org.jdom.Element getRootElement()</td>
      </tr>
      <tr>
        <td class="col-md-3">dfdlVersion</td>
        <td class="col-md-9"><i>not yet implemented</i></td>
      </tr>
      <tr>
        <td class="col-md-3">schema (reserved for future use)</td>
        <td class="col-md-9"><i>not yet implemented</i></td>
      </tr>
      <tr>
        <td class="col-md-3">unicodeByteOrderMark</td>
        <td class="col-md-9"><i>not yet implemented</i></td>
      </tr>
      <tr>
        <td class="col-md-3">Element Information Item</td>
        <td class="col-md-9">org.jdom.Element</td>
      </tr>
      <tr>
        <td class="col-md-3">namespace</td>
        <td class="col-md-9">org.jdom.Namespace getNamespace()</td>
      </tr>
      <tr>
        <td class="col-md-3">name</td>
        <td class="col-md-9">String getName()</td>
      </tr>
      <tr>
        <td class="col-md-3">document</td>
        <td class="col-md-9">org.jdom.Document getDocument()</td>
      </tr>
      <tr>
        <td class="col-md-3">datatype</td>
        <td class="col-md-9"><i>not yet implemented</i></td>
      </tr>
      <tr>
        <td class="col-md-3">dataValue</td>
        <td class="col-md-9">
          For simple types other than xs:string, the canonical
          XML representation of the value as returned by String getText(). See <a href="#xml-illegal-characters">XML Illegal Characters</a> for xs:string
          types containing XML illegal characters.
        </td>
      </tr>
      <tr>
        <td class="col-md-3">nilled</td>
        <td class="col-md-9">The "nilled" attribute in the "xsi" namespace.</td>
      </tr>
      <tr>
        <td class="col-md-3">children</td>
        <td class="col-md-9">java.util.List&lt;Element&gt; getChildren()</td>
      </tr>
      <tr>
        <td class="col-md-3">parent</td>
        <td class="col-md-9">org.jdom.Parent getParent()</td>
      </tr>
      <tr>
        <td class="col-md-3">schema</td>
        <td class="col-md-9"><i>not yet implemented</i></td>
      </tr>
      <tr>
        <td class="col-md-3">valid</td>
        <td class="col-md-9"><i>not yet implemented</i></td>
      </tr>
      <tr>
        <td class="col-md-3">unionMemberSchema</td>
        <td class="col-md-9"><i>not yet implemented</i></td>
      </tr>
      <tr>
        <td class="col-md-3">"No Value"</td>
        <td class="col-md-9">An org.jdom.Element with no children (not even Text nodes) is the representation of an element with "no value".</td>
      </tr>
      <tr>
        <td class="col-md-3">Augmented Infoset</td>
        <td class="col-md-9"><i>not yet implemented</i></td>
      </tr>
    </table>
  </div>
  <div id="w3cdom" class="tab-pane fade">
    <table class="table">
      <tr>
        <td class="col-md-3">Document Information Item</td>
        <td class="col-md-9">org.w3c.dom.Document</td>
      </tr>
      <tr>
        <td class="col-md-3">root</td>
        <td class="col-md-9">org.w3c.dom.Node getFirstChild()</td>
      </tr>
      <tr>
        <td class="col-md-3">dfdlVersion</td>
        <td class="col-md-9"><i>not yet implemented</i></td>
      </tr>
      <tr>
        <td class="col-md-3">schema (reserved for future use)</td>
        <td class="col-md-9"><i>not yet implemented</i></td>
      </tr>
      <tr>
        <td class="col-md-3">unicodeByteOrderMark</td>
        <td class="col-md-9"><i>not yet implemented</i></td>
      </tr>
      <tr>
        <td class="col-md-3">Element Information Item</td>
        <td class="col-md-9">org.w3c.dom.Element</td>
      </tr>
      <tr>
        <td class="col-md-3">namespace</td>
        <td class="col-md-9">String getNamespaceURI()</td>
      </tr>
      <tr>
        <td class="col-md-3">name</td>
        <td class="col-md-9">String getNodeName() if getNamespaceURI() == null, String getLocalName() otherwise</td>
      </tr>
      <tr>
        <td class="col-md-3">document</td>
        <td class="col-md-9">org.jdom.Document getOwnerDocument()</td>
      </tr>
      <tr>
        <td class="col-md-3">datatype</td>
        <td class="col-md-9"><i>not yet implemented</i></td>
      </tr>
      <tr>
        <td class="col-md-3">dataValue</td>
        <td class="col-md-9">
          For simple types other than xs:string, the canonical
          XML representation of the value as returned by String getWholeText(). See <a href="#xml-illegal-characters">XML Illegal Characters</a> for xs:string
          types containing XML illegal characters.
        </td>
      </tr>
      <tr>
        <td class="col-md-3">nilled</td>
        <td class="col-md-9">The "nilled" attribute in the "xsi" namespace.</td>
      </tr>
      <tr>
        <td class="col-md-3">children</td>
        <td class="col-md-9">org.w3c.dom.NodeList getChildNodes()</td>
      </tr>
      <tr>
        <td class="col-md-3">parent</td>
        <td class="col-md-9">org.w3c.dom.Node getParentNode()</td>
      </tr>
      <tr>
        <td class="col-md-3">schema</td>
        <td class="col-md-9"><i>not yet implemented</i></td>
      </tr>
      <tr>
        <td class="col-md-3">valid</td>
        <td class="col-md-9"><i>not yet implemented</i></td>
      </tr>
      <tr>
        <td class="col-md-3">unionMemberSchema</td>
        <td class="col-md-9"><i>not yet implemented</i></td>
      </tr>
      <tr>
        <td class="col-md-3">"No Value"</td>
        <td class="col-md-9">An org.w3c.dom.Element with no children (not even Text nodes) is the representation of an element with "no value".</td>
      </tr>
      <tr>
        <td class="col-md-3">Augmented Infoset</td>
        <td class="col-md-9"><i>not yet implemented</i></td>
      </tr>
    </table>
  </div>
  <div id="scalanode" class="tab-pane fade">
    <table class="table">
      <tr>
        <td class="col-md-3">Document Information Item</td>
        <td class="col-md-9">The document is represented by the root element. There is no separate document item.</td>
      </tr>
      <tr>
        <td class="col-md-3">root</td>
        <td class="col-md-9"><i>not supported</i></td>
      </tr>
      <tr>
        <td class="col-md-3">dfdlVersion</td>
        <td class="col-md-9"><i>not yet implemented</i></td>
      </tr>
      <tr>
        <td class="col-md-3">schema (reserved for future use)</td>
        <td class="col-md-9"><i>not yet implemented</i></td>
      </tr>
      <tr>
        <td class="col-md-3">unicodeByteOrderMark</td>
        <td class="col-md-9"><i>not yet implemented</i></td>
      </tr>
      <tr>
        <td class="col-md-3">Element Information Item</td>
        <td class="col-md-9">scala.xml.Elem</td>
      </tr>
      <tr>
        <td class="col-md-3">namespace</td>
        <td class="col-md-9">def namespace: String</td>
      </tr>
      <tr>
        <td class="col-md-3">name</td>
        <td class="col-md-9">def name: String</td>
      </tr>
      <tr>
        <td class="col-md-3">document</td>
        <td class="col-md-9"><i>not supported</i></td>
      </tr>
      <tr>
        <td class="col-md-3">datatype</td>
        <td class="col-md-9"><i>not yet implemented</i></td>
      </tr>
      <tr>
        <td class="col-md-3">dataValue</td>
        <td class="col-md-9">
          For simple types other than xs:string, the canonical
          XML representation of the value as returned by def text: String. See <a href="#xml-illegal-characters">XML Illegal Characters</a> for xs:string
          types containing XML illegal characters.
        </td>
      </tr>
      <tr>
        <td class="col-md-3">nilled</td>
        <td class="col-md-9">The "nilled" attribute in the "xsi" namespace.</td>
      </tr>
      <tr>
        <td class="col-md-3">children</td>
        <td class="col-md-9">def child: Node*</td>
      </tr>
      <tr>
        <td class="col-md-3">parent</td>
        <td class="col-md-9"><i>not supported</i></td>
      </tr>
      <tr>
        <td class="col-md-3">schema</td>
        <td class="col-md-9"><i>not yet implemented</i></td>
      </tr>
      <tr>
        <td class="col-md-3">valid</td>
        <td class="col-md-9"><i>not yet implemented</i></td>
      </tr>
      <tr>
        <td class="col-md-3">unionMemberSchema</td>
        <td class="col-md-9"><i>not yet implemented</i></td>
      </tr>
      <tr>
        <td class="col-md-3">"No Value"</td>
        <td class="col-md-9">A scala.xml.Elem with no children.</td>
      </tr>
      <tr>
        <td class="col-md-3">Augmented Infoset</td>
        <td class="col-md-9"><i>not yet implemented</i></td>
      </tr>
    </table>
  </div>
  <div id="xmltext" class="tab-pane fade">
    <table class="table">
      <tr>
        <td class="col-md-3">Document Information Item</td>
        <td class="col-md-9">The full text is the document.</td>
      </tr>
      <tr>
        <td class="col-md-3">root</td>
        <td class="col-md-9">The first XML tag in the document.</td>
      </tr>
      <tr>
        <td class="col-md-3">dfdlVersion</td>
        <td class="col-md-9"><i>not yet implemented</i></td>
      </tr>
      <tr>
        <td class="col-md-3">schema (reserved for future use)</td>
        <td class="col-md-9"><i>not yet implemented</i></td>
      </tr>
      <tr>
        <td class="col-md-3">unicodeByteOrderMark</td>
        <td class="col-md-9"><i>not yet implemented</i></td>
      </tr>
      <tr>
        <td class="col-md-3">Element Information Item</td>
        <td class="col-md-9">An XML tag</td>
      </tr>
      <tr>
        <td class="col-md-3">namespace</td>
        <td class="col-md-9">Defined using standard XML namespacing (e.g. xmlns="..." and element prefixes)</td>
      </tr>
      <tr>
        <td class="col-md-3">name</td>
        <td class="col-md-9">XML tag name</td>
      </tr>
      <tr>
        <td class="col-md-3">document</td>
        <td class="col-md-9">The full text is the document</td>
      </tr>
      <tr>
        <td class="col-md-3">datatype</td>
        <td class="col-md-9"><i>not yet implemented</i></td>
      </tr>
      <tr>
        <td class="col-md-3">dataValue</td>
        <td class="col-md-9">
          For simple types other than xs:string, the canonical
          XML representation of the value inside the opening/closing XML tags. See <a href="#xml-illegal-characters">XML Illegal Characters</a> for xs:string
          types containing XML illegal characters.
        </td>
      </tr>
      <tr>
        <td class="col-md-3">nilled</td>
        <td class="col-md-9">The "nilled" attribute in the "xsi" namespace.</td>
      </tr>
      <tr>
        <td class="col-md-3">children</td>
        <td class="col-md-9">Child XML tags</td>
      </tr>
      <tr>
        <td class="col-md-3">parent</td>
        <td class="col-md-9">Parent XML tags</td>
      </tr>
      <tr>
        <td class="col-md-3">schema</td>
        <td class="col-md-9"><i>not yet implemented</i></td>
      </tr>
      <tr>
        <td class="col-md-3">valid</td>
        <td class="col-md-9"><i>not yet implemented</i></td>
      </tr>
      <tr>
        <td class="col-md-3">unionMemberSchema</td>
        <td class="col-md-9"><i>not yet implemented</i></td>
      </tr>
      <tr>
        <td class="col-md-3">"No Value"</td>
        <td class="col-md-9">An XML tag with no content in between the opening and closing tags</td>
      </tr>
      <tr>
        <td class="col-md-3">Augmented Infoset</td>
        <td class="col-md-9"><i>not yet implemented</i></td>
      </tr>
    </table>
  </div>
  <div id="json" class="tab-pane fade">
    <table class="table">
      <tr>
        <td class="col-md-3">Document Information Item</td>
        <td class="col-md-9">The full text is the document, containing a JSON single object.</td>
      </tr>
      <tr>
        <td class="col-md-3">root</td>
        <td class="col-md-9">The first (and only) JSON string in the doucment object.</td>
      </tr>
      <tr>
        <td class="col-md-3">dfdlVersion</td>
        <td class="col-md-9"><i>not yet implemented</i></td>
      </tr>
      <tr>
        <td class="col-md-3">schema (reserved for future use)</td>
        <td class="col-md-9"><i>not yet implemented</i></td>
      </tr>
      <tr>
        <td class="col-md-3">unicodeByteOrderMark</td>
        <td class="col-md-9"><i>not yet implemented</i></td>
      </tr>
      <tr>
        <td class="col-md-3">Element Information Item</td>
        <td class="col-md-9">The first JSON string in an object.</td>
      </tr>
      <tr>
        <td class="col-md-3">namespace</td>
        <td class="col-md-9"><i>not supported</i></td>
      </tr>
      <tr>
        <td class="col-md-3">name</td>
        <td class="col-md-9">The first JSON string in an object.</td>
      </tr>
      <tr>
        <td class="col-md-3">document</td>
        <td class="col-md-9">The full text is the document</td>
      </tr>
      <tr>
        <td class="col-md-3">datatype</td>
        <td class="col-md-9"><i>not yet implemented</i></td>
      </tr>
      <tr>
        <td class="col-md-3">dataValue</td>
        <td class="col-md-9">
          For simple types other than xs:string, the canonical XML representation
          of the value inside double quotes. For xs:string types, a JSON escaped
          string in double quotes.
        </td>
      </tr>
      <tr>
        <td class="col-md-3">nilled</td>
        <td class="col-md-9">The value of the element is <i>null</i></td>
      </tr>
      <tr>
        <td class="col-md-3">children</td>
        <td class="col-md-9">Child JSON objects</td>
      </tr>
      <tr>
        <td class="col-md-3">parent</td>
        <td class="col-md-9">Parent JSON tags</td>
      </tr>
      <tr>
        <td class="col-md-3">schema</td>
        <td class="col-md-9"><i>not yet implemented</i></td>
      </tr>
      <tr>
        <td class="col-md-3">valid</td>
        <td class="col-md-9"><i>not yet implemented</i></td>
      </tr>
      <tr>
        <td class="col-md-3">unionMemberSchema</td>
        <td class="col-md-9"><i>not yet implemented</i></td>
      </tr>
      <tr>
        <td class="col-md-3">"No Value"</td>
        <td class="col-md-9">The value of the element is empty double quotes.</td>
      </tr>
      <tr>
        <td class="col-md-3">Augmented Infoset</td>
        <td class="col-md-9"><i>not yet implemented</i></td>
      </tr>
    </table>
  </div>
</div>

<h3 id="xml-illegal-characters">XML Illegal Characters</h3>

<p>Since DFDL strings can contain characters that are not allowed in XML at all,
for the XML based representations, these characters are mapped into the Unicode
Private Use Areas (PUA). This is similar to the scheme used by Microsoft
Visio (See: <a href="http://msdn.microsoft.com/en-us/library/office/aa218415%28v=office.10%29.aspx">http://msdn.microsoft.com/en-us/library/office/aa218415%28v=office.10%29.aspx</a>),
but extended to handle all the XML 1.0 illegal characters including those
with 16-bit codepoint values. This mapping is used bi-directionally, that is,
illegal characters are replaced by their legal counterparts when parsing, and
the reverse transformation is performed when unparsing, thereby allowing the
creation of data containing the XML illegal characters from legal XML
documents that contain only the mapped PUA corresponding characters.</p>

<p>These are the legal XML characters (for XML v1.0):</p>

<div class="highlighter-rouge"><pre class="highlight"><code>#x0 | #x9 | #xA | #xD | [#x20-#xD7FF] | [#xE000-#xFFFD] | [#x10000-#x10FFFF] | #xD (treated specially)
</code></pre>
</div>

<p>Illegal characters from <code class="highlighter-rouge">#x00</code> to <code class="highlighter-rouge">#x1F</code> are mapped to the PUA
by adding <code class="highlighter-rouge">#xE000</code> to their character code.</p>

<p>Illegal characters from <code class="highlighter-rouge">#xD800</code> to <code class="highlighter-rouge">#xDFFF</code> are mapped to the PUA by adding
<code class="highlighter-rouge">#x1000</code> to their character code. So <code class="highlighter-rouge">#xD800</code> maps to <code class="highlighter-rouge">#xE800</code>, and
<code class="highlighter-rouge">#xDFFF</code> maps to <code class="highlighter-rouge">#xEFFF</code>.</p>

<p>Illegal characters <code class="highlighter-rouge">#xFFFE</code> and <code class="highlighter-rouge">#xFFFF</code> are mapped to the PUA by
subtracting <code class="highlighter-rouge">#x0F00</code> from their character code, so to characters <code class="highlighter-rouge">#xF0FE</code>
and <code class="highlighter-rouge">#xF0FF</code>.</p>

<p>Character <code class="highlighter-rouge">#xD</code> (Carriage Return or CR) is mapped to <code class="highlighter-rouge">#xA</code> (Line Feed, or
LF). The CR character is allowed in the textual representation of XML
documents, but is always converted to LF in the XML Infoset. That is, it is
read by XML processors, but CRLF is converted to just LF, and CR alone is
converted to LF. Daffodil is in a sense a different ‘reader’ of data into the
XML infoset, so to be consistent with XML we map CR and CRLF to LF.</p>

<p>It is a processing error when parsing if any DFDL infoset string contains
characters in the parts of the PUA used by this mapping for illegal XML
codepoints.</p>

<p>It is a processing error if any DFDL infoset string character is created with a
character code greater than <code class="highlighter-rouge">#x10FFFF</code>.</p>

  </div>
</div>


      <footer>
        <footer class="site-footer">
    <div class="wrapper">
        <div class="footer-col-wrapper" style="font-size: .85em;">
            <hr>
            <div class="container">
                <div class="row">
                    <div class="col-xs-3" style="margin-top: 15px;">
                        <a href="http://incubator.apache.org"><img src="/assets/themes/apache/img/incubator_feather_egg_logo.png"
                                                                   alt="Apache Incubator" style="width:100%;"/></a>
                    </div>
                    <div class="col-xs-9">
                        Apache Daffodil is an effort undergoing <a href="https://incubator.apache.org/index.html">Incubation</a>
                        at The Apache Software Foundation (ASF), sponsored by the Incubator. Incubation is required of all newly
                        accepted projects until a further review indicates that the infrastructure, communications, and decision
                        making process have stabilized in a manner consistent with other successful ASF projects. While incubation
                        status is not necessarily a reflection of the completeness or stability of the code, it does indicate that
                        the project has yet to be fully endorsed by the ASF.
                    </div>
                </div>
            </div>
            <hr>
            <div>
                <div style="text-align: center;">
                    Copyright &copy; 2017 <a href="http://www.apache.org">The Apache Software Foundation</a>.
                    Licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version
                    2.0</a>.
                    <br>
                    Apache, the Apache Feather logo, and the Apache Incubator project logo are trademarks of The Apache
                    Software Foundation.
                </div>
            </div>
        </div>
    </div>
</footer>

      </footer>
    </div>

    <script src="/assets/themes/apache/jquery/jquery-2.1.1.min.js"></script>

    <script src="/assets/themes/apache/bootstrap/js/bootstrap.min.js"></script>


  </body>
</html>

