<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>ChecksumLayer (Apache Daffodil 4.0.0 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: org.apache.daffodil.api.layers, class: ChecksumLayer">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.apache.daffodil.api.layers</a></div>
<h1 title="Class ChecksumLayer" class="title">Class ChecksumLayer</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance"><a href="Layer.html" title="class in org.apache.daffodil.api.layers">org.apache.daffodil.api.layers.Layer</a>
<div class="inheritance">org.apache.daffodil.runtime1.layers.ChecksumLayerBase
<div class="inheritance">org.apache.daffodil.api.layers.ChecksumLayer</div>
</div>
</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code>org.apache.daffodil.lib.util.SimpleNamedLoadableService</code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public abstract class </span><span class="element-name type-name-label">ChecksumLayer</span>
<span class="extends-implements">extends org.apache.daffodil.runtime1.layers.ChecksumLayerBase</span></div>
<div class="block">A checksum layer computes a numeric value from a region of the data stream.
 <p>
 The term checksum is used generically here to subsume all sorts of CRCs, check digits, data hash, and
 digest calculations.
 <p>
 This abstract base is suitable only for checksums computed over small sections of data.
 It is not for large data streams or whole large files.
 The entire region of data the checksum is being computed over will be pulled into a byte buffer in memory.
 <p>
 The resulting checksum is the return value of the <a href="#compute(boolean,java.nio.ByteBuffer)"><code>compute(boolean, java.nio.ByteBuffer)</code></a> method.
 <p>
 This result is delivered into a DFDL variable for use by the DFDL schema.
 This DFDL variable can have any name such as 'crc', 'digest', or 'dataHash'.
 <p>
 The derived implementation class must also define a getter method based on the name of the DFDL variable which
 will be assigned with the checksum value.
 For example if the checksum is actually a specific digest/hash calculation and the DFDL variable is named
 <code>digest</code>, then this getter must be defined:
 <pre><code>
     int getLayerVariableResult_digest() {
       return this.digest; // usually returns a data member
     }
 </code>
 </pre>
 This will be called automatically to retrieve the integer value that was returned from the <code>compute</code> method,
 and the DFDL variable named <code>digest</code> will be assigned that value.
 <p>
 The derived class implementing a checksum layer must call
 <pre><code>
     setLength(len); // sets the length in bytes
 </code>
 </pre>
 to specify the length of the data region in bytes. Normally this would be called from the layer's implementation of
 the <code>setLayerVariableParameters</code> method:
 <pre><code>
     void setLayerVariableParameters(...) {
         ...
         setLength(len); // len is a constant,
                         // or is computed from a parameter variable
         ...
     }
 </code></pre>
 See the documentation of the <a href="Layer.html" title="class in org.apache.daffodil.api.layers"><code>Layer</code></a> class for a description of how DFDL variables are passed to the arguments
 of the <code>setLayerVariableParameters</code> method.
 <p>
 See <a href="Layer.html" title="class in org.apache.daffodil.api.layers"><code>Layer</code></a> for more details about layers generally as most of its documentation is
 relevant to this derived abstract base class as well.
 </p></div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(java.lang.String,java.lang.String)" class="member-name-link">ChecksumLayer</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;layerName,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;layerTargetNamespace)</code></div>
<div class="col-last even-row-color">
<div class="block">Base class constructor</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>abstract int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#compute(boolean,java.nio.ByteBuffer)" class="member-name-link">compute</a><wbr>(boolean&nbsp;isUnparse,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/ByteBuffer.html" title="class or interface in java.nio" class="external-link">ByteBuffer</a>&nbsp;byteBuffer)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Override to compute the checksum of a buffer of data.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-org.apache.daffodil.runtime1.layers.ChecksumLayerBase">Methods inherited from class&nbsp;org.apache.daffodil.runtime1.layers.ChecksumLayerBase</h3>
<code>getChecksum, getLength, setChecksum, setLength, wrapLayerInput, wrapLayerOutput</code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-org.apache.daffodil.api.layers.Layer">Methods inherited from class&nbsp;org.apache.daffodil.api.layers.<a href="Layer.html" title="class in org.apache.daffodil.api.layers">Layer</a></h3>
<code><a href="Layer.html#getLayerRuntime()">getLayerRuntime</a>, <a href="Layer.html#getProcessingErrorExceptions()">getProcessingErrorExceptions</a>, <a href="Layer.html#localName()">localName</a>, <a href="Layer.html#name()">name</a>, <a href="Layer.html#namespace()">namespace</a>, <a href="Layer.html#processingError(java.lang.String)">processingError</a>, <a href="Layer.html#processingError(java.lang.Throwable)">processingError</a>, <a href="Layer.html#runtimeSchemaDefinitionError(java.lang.String)">runtimeSchemaDefinitionError</a>, <a href="Layer.html#runtimeSchemaDefinitionError(java.lang.Throwable)">runtimeSchemaDefinitionError</a>, <a href="Layer.html#setLayerRuntime(org.apache.daffodil.runtime1.layers.LayerRuntime)">setLayerRuntime</a>, <a href="Layer.html#setProcessingErrorException(java.lang.Class)">setProcessingErrorException</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(java.lang.String,java.lang.String)">
<h3>ChecksumLayer</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">ChecksumLayer</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;layerName,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;layerTargetNamespace)</span></div>
<div class="block">Base class constructor</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>layerName</code> - the name of the layer</dd>
<dd><code>layerTargetNamespace</code> - the URI that is the target namespace of the layer</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if arguments are null or do not obey required syntax.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="compute(boolean,java.nio.ByteBuffer)">
<h3>compute</h3>
<div class="member-signature"><span class="modifiers">public abstract</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">compute</span><wbr><span class="parameters">(boolean&nbsp;isUnparse,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/ByteBuffer.html" title="class or interface in java.nio" class="external-link">ByteBuffer</a>&nbsp;byteBuffer)</span></div>
<div class="block">Override to compute the checksum of a buffer of data.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code>compute</code>&nbsp;in class&nbsp;<code>org.apache.daffodil.runtime1.layers.ChecksumLayerBase</code></dd>
<dt>Parameters:</dt>
<dd><code>isUnparse</code> - true if the direction is unparsing. Used because in some cases the computed checksum must
                   be written into the byte buffer in a specific location.</dd>
<dd><code>byteBuffer</code> - the bytes over which the checksum is to be computed.
                   This byte buffer can be modified, (for example so as to embed the computed checksum in the
                   middle of the data somewhere).
                   The resulting modified bytes become the data that is read by the DFDL parsing and written
                   when unparsing.</dd>
<dt>Returns:</dt>
<dd>the checksum value as an Int (32-bit signed integer)</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
